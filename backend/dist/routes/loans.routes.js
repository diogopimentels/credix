"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.loansRoutes = void 0;
const express_1 = require("express");
const LoansController_1 = require("../controllers/LoansController");
const LoansService_1 = require("../services/LoansService");
const LoansRepository_1 = require("../repositories/LoansRepository");
const ClientsRepository_1 = require("../repositories/ClientsRepository");
const authMiddleware_1 = require("../middlewares/authMiddleware");
const loansRoutes = (0, express_1.Router)();
exports.loansRoutes = loansRoutes;
const loansRepository = new LoansRepository_1.LoansRepository();
const clientsRepository = new ClientsRepository_1.ClientsRepository();
const loansService = new LoansService_1.LoansService(loansRepository, clientsRepository);
const loansController = new LoansController_1.LoansController(loansService);
loansRoutes.use(authMiddleware_1.authMiddleware);
loansRoutes.post('/', (req, res) => loansController.create(req, res));
loansRoutes.get('/', (req, res) => loansController.index(req, res));
loansRoutes.get('/:id', (req, res) => loansController.show(req, res));
loansRoutes.post('/:id/payments', (req, res) => loansController.addPayment(req, res));
